<div class="max-w-[720px] mx-auto">
    <h1 class="text-lg font-bold mb-3"><%=t(".title")%></h1>
    <%= form_with model: @vocabulary_tag, class: "space-y-3 w-full" do |f| %>
        <%= f.label :name, t(".tag_name"), class: "block text-sm mb-1" %>
        <%= f.text_field :name, class: "w-full rounded-xl border px-3 py-2" %>
        <% if @vocabulary_tag.errors[:name].any? %>
          <p class="text-red-600 text-sm mt-1"><%= @vocabulary_tag.errors[:name].first %></p>
        <% end %>
      <%= f.label :color, t("common.color"), class: "block text-sm mb-1" %>
      <% color_id = dom_id(@vocabulary_tag, :color) %>
      <div class="flex items-center gap-3">
        <%= f.color_field :color, id: color_id,
              class: "h-9 w-14 rounded border",
              oninput: "const p=this.parentElement; const chip=p.querySelector('[data-chip]'); if(chip) chip.style.backgroundColor=this.value; const t=p.querySelector('[data-hex]'); if(t) t.value=this.value" %>

        <%= text_field_tag :color_hex, @vocabulary_tag.color, 'data-hex': true,
              placeholder: "#RRGGBB",
              class: "w-32 rounded-xl border px-3 py-2",
              oninput: "const c=document.getElementById('#{color_id}'); c.value=this.value; const chip=this.parentElement.querySelector('[data-chip]'); if(chip) chip.style.backgroundColor=this.value" %>

        <span data-chip class="hidden inline-block h-6 w-6 rounded-full border" style="background-color:<%= @vocabulary_tag.color %>"></span>

        <button type="button" class="rounded border border-gray-300 bg-white px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-100 hover:shadow-sm active:translate-y-0.5 transition duration-150"
                onclick="const p=this.parentElement; p.querySelector('input[type=color]').value=''; const t=p.querySelector('[data-hex]'); if(t) t.value=''; const chip=p.querySelector('[data-chip]'); if(chip) chip.style.backgroundColor='transparent'">
          <%= t("common.color_clear") %>
        </button>
      </div>
      <p class="text-xs text-white mt-1"><%=t("common.color_picker")%></p>
    <%= f.submit t("common.create"), class: "w-40 rounded-xl bg-green-600 text-white px-6 py-2 hover:bg-green-700 hover:shadow-lg active:translate-y-0.5 transition duration-150" %>
    <%= link_to t("common.return_tag_index"), tags_path, class: "ml-2 underline" %>
    <%= link_to t("common.return_index"), vocabulary_tags_path, class: "ml-2 underline" %>
  <% end %>
</div>
