<div class="max-w-8xl mx-auto mt-6 space-y-4">
  <h1 class="text-xl font-semibold"><%= t(".title") %></h1>
  <%# 検索フォーム %>
  <%= render "search_form", q: @q %>
  <%# 語彙表示 %>
  <div class="rounded-2xl bg-white text-gray-900 shadow divide-y overflow-hidden">
    <% @sentences.each do |v| %>
      <div class="relative p-4 flex items-start justify-between gap-4 hover:bg-gray-200 cursor-pointer">
        <div class="relative">
          <% body_text = v.body.to_s.gsub(/\A[[:space:]\u3000]+/, "") %>
          <div class="text-[15px] md:text-base leading-7 tracking-[0.01em] antialiased whitespace-pre-line break-words"><%= truncate(body_text, length: 440, omission: "...") %></div>
          <div class="mt-1 text-xs text-gray-500">
            <%= t("enums.sentence.sentence_category.#{v.sentence_category}") %>
          </div>
          <%# タグを表示（本文の下・内部スクロールで崩れ防止） %>
          <% if v.sentence_tags.any? %>
            <div class="relative z-50 pointer-events-auto mt-2 flex flex-wrap gap-2 max-h-16 overflow-y-auto">
              <% v.sentence_tags.order(:name).each do |tag| %>
                <%= link_to tag.name,
                    sentences_path(q: { sentence_tags_id_in: [tag.id] }),
                    class: "px-2 py-1 rounded-full border text-xs hover:opacity-80",
                    style: "background-color: #{tag.color.presence || '#000'}; color: #fff;" %>
              <% end %>
            </div>
          <% end %>
        </div>
        <%# 作成日を表示 %>
        <div class="text-xs text-gray-500 whitespace-nowrap"><%= l v.created_at, format: :short %></div>
        <%= link_to "", sentence_path(v), class: "absolute inset-0 z-10 block" %>
      </div>
    <% end %>
    <% if @sentences.empty? %>
      <div class="p-6 text-center text-gray-500"><%= t(".empty") %></div>
    <% end %>
  </div>
  <%# ページネーション %>
  <%= paginate @sentences %>
</div>
